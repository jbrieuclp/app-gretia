<!DOCTYPE html>
<head>
    <title>{% block title %}GRETIA :: Connexion{% endblock title %}</title>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="shortcut icon" type="image/x-icon" href="{{ asset('bundles/visuconsultation/carto/images/icones/favicon.ico') }}" />

    {% block stylesheets %}

        
        {# Plutôt que d'inclure le page_head_style.html.twig de ezDemo, on inclut les css de eZDemo plus tous nos css particuliers #}
        {% stylesheets filter='cssrewrite'
            'http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css'
            '@VisuConsultationBundle/Resources/public/lib/bootstrap-3.3.6/css/bootstrap.min.css'
            '@VisuConsultationBundle/Resources/public/lib/bootstrap-3.3.6/css/bootstrap-theme.min.css'
            '@VisuConsultationBundle/Resources/public/lib/font-awesome-4.6.3/css/font-awesome.css'
            '@VisuConsultationBundle/Resources/public/css/ofsa_fullscreen.css'
        %}
        
        {# hack dans les chemins du css, donc pas mettre min pour l'instant #}
        {# Le filtre cssrewrite est extrêmement important : il réécrit les liens des images dans les css pour qu'ils fonctionnent #}
       
        <link rel="stylesheet" type="text/css" href="{{ asset_url }}"/>
        {% endstylesheets %}
    {% endblock stylesheets %}
    
</head>

<body>

    <div id="content" class="container">

        <div class="row" style="margin-top:40px;">
            {% if error is null %}
                <div class="col-lg-4 col-lg-offset-4 col-sm-6 col-sm-offset-3">
                    <div class="alert alert-warning" data-info="big">
                        <p>Veuillez vous connecter avant d'accéder aux pages réservées.</p>
                    </div>
                </div>
            {% else %}
                <div class="col-lg-4 col-lg-offset-4 col-sm-6 col-sm-offset-3">
                <div class="alert alert-danger fade in" data-info="big" role="alert">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    {% if error.message == 'Bad credentials.' %}
                        <div>Identifiant ou mot de passe invalide.</div>
                    {% else %}
                        <div>Erreur de connexion.</div>
                    {% endif %}
                </div>
            </div>
            {% endif %}
            <div class="col-lg-4 col-lg-offset-4 col-sm-6 col-sm-offset-3">
                <form action="{{ path('visu_security_login') }}" method="post" class="connect-form">
                    <div class="_connexion">
                        <div class="form-group">
                            <label for="username">Identifiant</label>
                            <input class="form-control" name="_username" value="{{ last_username }}" placeholder="Courriel de connexion"/>
                            
                        </div>
                        <div class="form-group">
                            <label for="password">Mot de passe</label>
                            <input class="form-control" type="password" name="_password" placeholder="Mot de passe"/>
                        </div>

                       {#<input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">#}

                        <div class="text-center">
                            <input class="btn btn-ofsa" type="submit" value="Connexion">
                        </div>
                    </div>
                </form>
            </div>
</div>
        <br>

    </div>

    {% block javascripts %} 
        <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
        <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script> 

        {% javascripts
            '@VisuConsultationBundle/Resources/public/js/config.js'
            '@VisuConsultationBundle/Resources/public/lib/jquery-1.12.1/jquery-1.12.1.min.js'
            '@VisuConsultationBundle/Resources/public/lib/jquery-ui-1.10.4/jquery-ui.js'
            '@VisuConsultationBundle/Resources/public/lib/bootstrap-3.3.6/js/bootstrap.min.js'
            '@VisuConsultationBundle/Resources/public/js/ofsa.js'
        %}

          <script type="text/javascript" src="{{ asset_url }}"></script>
        {% endjavascripts %}
    {% endblock javascripts %}
    
</body>
</html>