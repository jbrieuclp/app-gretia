<div class="row">
  <mat-form-field class="col-sm-4">
    <mat-select 
      placeholder="Trier par"
      [formControl]="orderByControl"
    >
      <mat-option 
        *ngFor="let orderBy of orderByList"
        [value]="orderBy"
      > {{ orderBy.label }} </mat-option>
    </mat-select>
  </mat-form-field>
</div>

<ng-container *ngIf="expenses.length || expensesLoading; else noData">
  <ng-container *ngIf="expenses.length; else loadingData">
    <mat-accordion multi="true">
      <mat-expansion-panel 
        *ngFor="let group of groupElements;let first = first"
        [expanded]="first"
      >
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{ getTitle(group) }}
          </mat-panel-title>
          <mat-panel-description>
            <span>
              <small>{{ getExpensesAmountByGroup(group) }} €</small>
            </span>
          </mat-panel-description>
        </mat-expansion-panel-header>

        <app-project-worktime-expenses 
          [expenses]="getExpensesByGroup(group)"
          [orderBy]="orderByControl.value"
        ></app-project-worktime-expenses>

      </mat-expansion-panel>
    </mat-accordion>
  </ng-container>
</ng-container>

<ng-template #noData>Aucun élément à afficher</ng-template>
<ng-template #loadingData> Récupération des données en cours... </ng-template>