<div class="row">
  <mat-form-field class="col-sm-6">
    <input matInput 
      placeholder="Rechercher..." 
      [formControl]="filterInput">
  </mat-form-field>
</div>

<div class="list-container mat-elevation-z8">
  <div 
    *ngIf="loading"
    class="loading-shade"
  >
    <mat-spinner></mat-spinner>
  </div>

  <div class="table-container">
		<table 
			mat-table 
			[dataSource]="dataSource" 
		  matSort 
		  matSortActive="study.label" 
		  matSortDisableClear 
		  matSortDirection="asc"
		>
		  <!-- Code Column -->
		  <ng-container matColumnDef="study.code">
		    <th 
		    	mat-header-cell 
		    	*matHeaderCellDef
		    	mat-sort-header
		    >Code</th>
		    <td mat-cell *matCellDef="let row">{{ row.study.code }}</td>
		  </ng-container>

		  <!-- Études Column -->
		  <ng-container matColumnDef="study.label">
		    <th 
		    	mat-header-cell 
		    	*matHeaderCellDef
		    	mat-sort-header
		    >Études</th>
		    <td mat-cell *matCellDef="let row">
		    	<span 
		    		class="study-label-text"
		    		(click)="openStudyInfo(row.study)"
		    	>{{ row.study.label }}</span>
		    </td>
		  </ng-container>

		  <!-- expectedTime Column -->
		  <ng-container matColumnDef="expectedTime">
		    <th 
		    	mat-header-cell 
		    	*matHeaderCellDef
		    	mat-sort-header
		    >Jours prévu</th>
		    <td mat-cell *matCellDef="let row">{{ row.expectedTime }}</td>
		  </ng-container>

		  <!-- consumedTime Column -->
		  <ng-container matColumnDef="consumedTime">
		    <th 
		    	mat-header-cell 
		    	*matHeaderCellDef
		    	mat-sort-header
		    >Jours consommé</th>
		    <td mat-cell *matCellDef="let row">{{ row.consumedTime }}</td>
		  </ng-container>

		  <!-- usagePercent Column -->
		  <ng-container matColumnDef="usagePercent">
		    <th 
		    	mat-header-cell 
		    	*matHeaderCellDef
		    	mat-sort-header
		    >Jours consommé (%)</th>
		    <td mat-cell *matCellDef="let row">{{ row.usagePercent !== null ? row.usagePercent+"%" : "Non prévu" }}</td>
		  </ng-container>

		  <!-- State Column -->
		  <!-- <ng-container matColumnDef="state">
		    <th mat-header-cell *matHeaderCellDef>State</th>
		    <td mat-cell *matCellDef="let row">{{row.state}}</td>
		  </ng-container> -->

		  <!-- Created Column -->
		  <!-- <ng-container matColumnDef="created">
		    <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>
		      Created
		    </th>
		    <td mat-cell *matCellDef="let row">{{row.created_at | date}}</td>
		  </ng-container> -->

		  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
		  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
		</table>

		<mat-paginator 
			[length]="resultsLength" 
			[pageSize]="25"
			[pageSizeOptions]="[10, 25, 50, 100, 250]"
		></mat-paginator>

	</div>
</div>


<!-- <div>
	<mat-card>
		<table class="table table-sm">
			<thead>
				<tr>
					<th> Études </th>
					<th> jours prévus </th>
					<th> jours réalisé </th>
					<th> jours restant </th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let study of studies">
					<td> 
						<a 
							[routerLink]="['/projet/etudes/', study.id]" 
	        		matTooltip="Accéder au détail de l'étude"
	        	><b>{{ study.label }}</b></a> 
	        </td>
					<td> {{ getScheduledDays(study) }} </td>
					<td> {{ getUsedDays(study) | number: '1.0-2'}} </td>
					<td> {{ getScheduledDays(study) - getUsedDays(study) | number: '1.0-2' }} </td>
				</tr>
			</tbody>
		</table>
	</mat-card>
</div> -->

<!-- <app-projet-plans-prov-schedule *ngIf="person"></app-projet-plans-prov-schedule> -->