<h4>Plan de charges</h4>
<div class="row">
	<mat-form-field class="col-md-3">
	  <mat-label>Personne</mat-label>
	  <mat-select
	  	[formControl]="personControl"
	  >
	    <mat-option *ngFor="let person of (persons|async)" [value]="person['@id']">
	      {{ person.firstname }} {{ person.name }}
	    </mat-option>
	  </mat-select>
	</mat-form-field>

	<mat-form-field class="col-md-2">
	  <mat-label>Année</mat-label>
	  <mat-select
	  	[formControl]="yearsControl"
	  >
	    <mat-option *ngFor="let year of years" [value]="year">
	      {{ year }}
	    </mat-option>
	  </mat-select>
	</mat-form-field>
</div>

<div class="row">
	<div class="col-md-2">
		<app-projet-pdc-global-stats></app-projet-pdc-global-stats>
	</div>

	<div class="col-md-2">
		<mat-accordion *ngIf="person">
		  <mat-expansion-panel>
		    <mat-expansion-panel-header>
		      <mat-panel-title>
		        État congés - récups
		      </mat-panel-title>
		    </mat-expansion-panel-header>
		    <ng-container *ngIf="!loading; else loadingTemplate">
					<table class="table">
						<tr>
							<td>Congés N</td>
							<td>{{ person.cpYear }} jour(s)</td>
						</tr>
						<tr>
							<td>Congés N-1</td>
							<td>{{ person.cpPrevYear }} jour(s)</td>
						</tr>
						<tr>
							<td>Recup</td>
							<td>{{ person.recup / 60 | number: '1.0-2' }} heure(s)</td>
						</tr>
					</table>
				</ng-container>
				<ng-template #loadingTemplate>
			    <app-loader message="Chargement en cours"></app-loader>
			  </ng-template>
		  </mat-expansion-panel>
		</mat-accordion>
			
	</div>



	<div class="col-md-8">
		<!-- <app-projet-pdc-person-info></app-projet-pdc-person-info> -->
	</div>
</div>

<app-projet-plan-charges></app-projet-plan-charges>

