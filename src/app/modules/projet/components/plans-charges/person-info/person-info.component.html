<mat-accordion *ngIf="workedRepartition.length">
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        RÃ©partition des jours
      </mat-panel-title>
    </mat-expansion-panel-header>

		<ng-container *ngIf="!loading; else loadingTemplate">
			<table class="table table-bordered">
				<thead>
					<tr>
						<th></th>
						<th 
							*ngFor="let employee of workedRepartition"
							class="text-center"
							colspan="3"
						>
							<small> {{ employee.label }} ({{ employee.rate }}%) </small> <!-- | date:'dd/MM/yyyy' -->
							<br>
							<small> {{ startingDate(employee.contractStart) | date:'dd/MM/yyyy' }}  - {{ endDate(employee.contractEnd) | date:'dd/MM/yyyy' }} </small>
						</th>
					</tr>
					<tr>
						<th></th>
						<ng-container *ngFor="let employee of workedRepartition">
							<th class="text-center"> {{ employee.rate }}% </th>
							<th class="text-center"> Jours dispo. </th>
							<th class="text-center"> Jours conso. </th>
						</ng-container>
						<th><b> TOTAL </b></th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let param of workedRepartition[0]['params']">
						<td><small> {{ param.name }} </small></td>
						<ng-container *ngFor="let employee of workedRepartition">
							<td class="text-center">
								{{ findParam(employee.params, param.code).value * 100 }}%
							</td>
							<td class="text-right"> {{ getNbJours(employee, param.code) }} </td>
							<td class="text-right"> {{ getUsedDaysByParam(employee, param.code) }} </td>
						</ng-container>
						<td><b> {{ getSumByParam(param.code) }} </b></td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<td><b> TOTAL </b></td>
						<ng-container *ngFor="let employee of workedRepartition">
							<td class="text-center"><b> {{ getSumParamPercent(employee) }}% </b></td>
							<td class="text-right"><b> {{ getSumDays(employee) }} </b></td>
							<td class="text-right"><b> ? </b></td>
						</ng-container>
						<td><b> {{ getTotalDays() }} </b></td>
					</tr>
				</tfoot>
			</table>
		</ng-container>
		<ng-template #loadingTemplate>
	    <app-loader message="Chargement en cours"></app-loader>
	  </ng-template>
  </mat-expansion-panel>
</mat-accordion>