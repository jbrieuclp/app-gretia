<form [formGroup]="form">
			
	<div class="row">
	  <mat-form-field class="col-md-2">
	  	<mat-label>Date de début</mat-label>
		  <input 
		  	matInput 
		  	[matDatepicker]="startP" 
		  	placeholder="jj/mm/aaaa" 
		  	formControlName="start"
		  	required>
		  <mat-datepicker-toggle matSuffix [for]="startP"></mat-datepicker-toggle>
		  <mat-datepicker #startP></mat-datepicker>
		</mat-form-field>

	  <mat-form-field class="col-md-2">
	  	<mat-label>Date de fin</mat-label>
		  <input 
		  	matInput 
		  	[matDatepicker]="endP" 
		  	placeholder="jj/mm/aaaa" 
		  	formControlName="end">
		  <mat-datepicker-toggle matSuffix [for]="endP"></mat-datepicker-toggle>
		  <mat-datepicker #endP></mat-datepicker>
		</mat-form-field>
	</div>

	<button 
		mat-raised-button 
		color="primary"
		[disabled]="form.invalid || waiting"
		(click)="getWorks()"
	> {{ waiting ? 'Ca arrive...' : 'Afficher'}} </button>

</form>

<mat-divider 
	inset="true"
	style="margin: 20px 0px;"
></mat-divider>

<table class="table table-bordered">
	<thead>
		<tr>
			<th> </th>
			<th> Dépenses </th>
			<th> Financements </th>
		</tr>
	</thead>
	<tbody>
		
	</tbody>
		<ng-container *ngIf="actions.length > 0">
			<tr> <th colspan="3"> Actions</th> </tr>
			<tr *ngFor="let action of actions">
				<td> {{ action.label }} </td>
				<td> {{ action.numberDaysDone * study.dailyCost }} € </td>
				<td> 
					{{ action.nbOfDays * study.dailyCost }} € <br>
					<small>({{ action.nbOfDays }} jours x {{ study.dailyCost }} €/j)</small></td>
			</tr>
		</ng-container>
		<ng-container *ngIf="charges.length > 0">
			<tr> <th colspan="3"> Charges </th> </tr>
			<tr *ngFor="let charge of charges">
				<td> {{ charge.label }} </td>
				<td> {{ charge.cost * charge.quantity }} € </td>
				<td> {{ charge.cost * charge.quantity }} € <br>
			</tr>
		</ng-container>
<!-- 	<tbody>
		<tr>
			<th colspan="2"> Financements </th>
			<td colspan="2"> 
				<ng-container *ngIf="!studyS.loadingStudy; else queryLoader">
					{{ study.funding }}
				</ng-container>
			</td>
		</tr>
		<tr class="table-secondary">
			<th colspan="2"> Dépenses </th>
			<th> Prévisionelles </th>
			<th> Réelles </th>
		</tr>
		<tr>
			<td></td>
			<th> Actions </th>
			<td> 
				<ng-container *ngIf="!studyMontagesS.loading; else queryLoader">
					- {{ actionsPreviCost }}
				</ng-container>
			</td>
			<td> 
				<ng-container *ngIf="!studyMontagesS.loading; else queryLoader">
					- {{ actionsRealCost }}
				</ng-container>
			</td>
		</tr>
		<tr>
			<td></td>
			<th> Matériels </th>
			<td> 
				<ng-container *ngIf="!studyMontagesS.loading; else queryLoader">
					- {{ materialsTotalCost }}
				</ng-container>
			</td>
			<td> 
				<ng-container *ngIf="!studyMontagesS.loading; else queryLoader">
					- {{ materialsTotalCost }}
				</ng-container>
			</td>
		</tr>
	</tbody>
	<tfoot>
		<tr>
			<th 
				class="table-dark"
				colspan="2"
			> Total </th>
			<td class="table-dark"> 
				<ng-container *ngIf="!studyS.loadingStudy && !studyMontagesS.loading; else queryLoader">
					{{ study.funding - (actionsPreviCost + materialsTotalCost) }}
				</ng-container>
			</td>
			<td class="table-dark"> 
				<ng-container *ngIf="!studyS.loadingStudy && !studyMontagesS.loading; else queryLoader">
					{{ study.funding - (actionsRealCost + materialsTotalCost) }}
				</ng-container>
			</td>
		</tr>
	</tfoot> -->
</table>