<div class="row">
  <div class="col-md-5">
    <mat-card>
      <ng-container *ngIf="!loading; else loadingTemplate">

        <div>
          <button 
            (click)="openTaskForm()"
            type="button"
            mat-raised-button 
            color="primary">
            <mat-icon>add</mat-icon> Ajouter
          </button>
        </div>

        <table 
          mat-table 
          [dataSource]="dataSource" 
          multiTemplateDataRows
          matSort
          class="mat-elevation-z8 task-list">

          <!-- Name Column -->
          <ng-container matColumnDef="intitule">
            <th 
              mat-header-cell 
              *matHeaderCellDef 
              mat-sort-header
            > Intitulé </th>
            <td 
              mat-cell 
              *matCellDef="let element"
              style="color: #673ab7;"> 
            	<b>{{ element.intitule }}</b>
            </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="nbJours">
            <th 
              mat-header-cell 
              *matHeaderCellDef 
              mat-sort-header
            > Jours donnés </th>
            <td 
              mat-cell 
              *matCellDef="let element"
            > {{ element.nbJours }} </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="numberDaysDone">
            <th 
              mat-header-cell 
              *matHeaderCellDef 
              mat-sort-header
            > Jours consommés </th>
            <td 
              mat-cell 
              *matCellDef="let element"
            > {{ element.numberDaysDone }} </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="charge">
            <th 
              mat-header-cell 
              *matHeaderCellDef 
              mat-sort-header
            > action financée </th>
            <td 
              mat-cell 
              *matCellDef="let element"
            > 
              <ng-container *ngIf="element.charge !== null; else noCharge">
                Oui ({{ element.charge.chargeType.chargeTypeRef.label }})
              </ng-container>
              <ng-template #noCharge>
                Non
              </ng-template>
            </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="removable">
            <th 
              mat-header-cell 
              *matHeaderCellDef
            > </th>
            <td 
              mat-cell 
              *matCellDef="let element"
            > 
              <button 
                *ngIf="element.removable"
                mat-icon-button
                color="warn"
                (click)="deleteTask(element)"
              >
                <mat-icon>delete</mat-icon>
              </button>
        		</td>
          </ng-container>

          <tr 
            mat-header-row 
            *matHeaderRowDef="displayedColumns"
          ></tr>
          <tr 
            mat-row 
            *matRowDef="let element; columns: displayedColumns;"
            class="task-element-row"
            (click)="selectTask(element)"
          ></tr>

        </table>

      </ng-container>
      <ng-template #loadingTemplate>
        <app-loader message="Chargement en cours"></app-loader>
      </ng-template>
    </mat-card>
  </div>
  <div class="col-md-7">
    <app-projet-task></app-projet-task>
  </div>
</div>