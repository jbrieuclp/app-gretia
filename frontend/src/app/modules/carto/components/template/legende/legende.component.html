<div class="legend-panel">
	<div class="legend-panel-header">l√©gende</div>
	<div class="legend-panel-content">
		<div *ngFor="let layer of layerS.layers">
			<ng-container *ngIf="layer.olLayer.get('displayInLegend')">
				<ng-container [ngSwitch]="layer.type">

					<ng-container *ngSwitchCase="'pression'">
					  <ng-container *ngIf="layer.state == 'done'">
							<div class="legend-layer">
								<div>
									<mat-icon class="float-left pointer remove-layer" 
										(click)="layer.olLayer.set('displayInLegend', false)"
										(click)="layer.olLayer.setVisible(false)"
										matTooltip="Enlever cette couche de la carte">clear</mat-icon>
										
									<mat-icon class="float-left pointer"
										matTooltip="Masquer cette couche"
										(click)="layer.olLayer.setVisible(!layer.olLayer.getVisible())">
										{{ (layer.olLayer.getVisible()) ? 'visibility' : 'visibility_off' }}
									</mat-icon> {{layer.olLayer.get('title')}}
								</div>
								<div class="legend-layer-color" *ngIf="layer.olLayer.getVisible()">
									<div class="row-legende" *ngFor="let element of layerS.getLegende(layer)">
										<span class="color" [ngStyle]="{'background-color': element.color}"></span><span class="libelle">{{element.label}}</span>
									</div>
								</div>
							</div>
						</ng-container>
				  </ng-container>

					<ng-container *ngSwitchCase="'richesse'">
					  <ng-container *ngIf="layer.state == 'done'">
							<div class="legend-layer">
								<div>
									<mat-icon class="float-left pointer remove-layer" 
										(click)="layer.olLayer.set('displayInLegend', false)"
										(click)="layer.olLayer.setVisible(false)"
										matTooltip="Enlever cette couche de la carte">clear</mat-icon>

									<mat-icon class="float-left pointer"
										matTooltip="Masquer cette couche"
										(click)="layer.olLayer.setVisible(!layer.olLayer.getVisible())">
										{{ (layer.olLayer.getVisible()) ? 'visibility' : 'visibility_off' }}
									</mat-icon> {{layer.olLayer.get('title')}}
								</div>
								<div class="legend-layer-color" *ngIf="layer.olLayer.getVisible()">
									<div class="row-legende" *ngFor="let element of layerS.getLegende(layer)">
										<span class="color" [ngStyle]="{'background-color': element.color}"></span><span class="libelle">{{element.label}}</span>
									</div>
								</div>
							</div>
						</ng-container>
				  </ng-container>
					
				  <ng-container *ngSwitchCase="'repartition'">
					  <ng-container *ngIf="layer.state == 'done'">
							<div class="legend-layer">
								<div>
									<mat-icon class="float-left pointer remove-layer" 
										(click)="layer.olLayer.set('displayInLegend', false)"
										(click)="layer.olLayer.setVisible(false)"
										matTooltip="Enlever cette couche de la carte">clear</mat-icon>

									<mat-icon class="float-left pointer"
										matTooltip="Masquer cette couche"
										(click)="layer.olLayer.setVisible(!layer.olLayer.getVisible())">
										{{ (layer.olLayer.getVisible()) ? 'visibility' : 'visibility_off' }}
									</mat-icon> {{layer.properties.taxon.nom_valide}}
								</div>
								<div class="legend-layer-color" *ngIf="layer.olLayer.getVisible()">
									<div class="row-legende" *ngFor="let element of layerS.getLegende(layer)">
										<span class="color" [ngStyle]="{'background-color': element.color}"></span><span class="libelle">{{element.label}}</span>
									</div>
								</div>
							</div>
						</ng-container>
				  </ng-container>

				</ng-container>
			</ng-container>
			
		</div>
	</div>
</div>