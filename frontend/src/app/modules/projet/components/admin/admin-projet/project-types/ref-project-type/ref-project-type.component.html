<mat-card *ngIf="loading || refProjectType">
	<mat-card-title>Information rapide</mat-card-title>

	<ng-container *ngIf="!loading; else loadingTmp">

		<mat-card-content>
			<div class="float-right" style="margin-bottom: 10px;">
			  <button 
			  	*ngIf="refProjectType.removable"
					mat-mini-fab
					matTooltip="Supprimer"
					color="warn"
					(click)="delete(refProjectType)">
			    <mat-icon>delete</mat-icon>
			  </button>
			</div>
			<h5> Type de projet : {{ refProjectType.libelle }} </h5>

			<mat-horizontal-stepper #stepper>

				<mat-step>
					<h5>Liste des contrats</h5>
					<div style="margin-bottom: 5px;">
						<button 
							mat-stroked-button 
							color="primary"
							(click)="addProjectType()">Nouveau contrat
						</button>
					</div>

					<table class="table table-bordered">
						<thead class="thead-dark">
							<tr>
								<th>Début d'application</th>
								<th>Fin d'application</th>
								<th>Coût jour</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<ng-container *ngIf="refProjectType.projectTypes.length; else noData">
								<tr *ngFor="let projectType of refProjectType.projectTypes|sortBy:'desc':'applicationDebut';">
									<td>{{ projectType.applicationDebut | date:'dd/MM/yyyy' }}</td>
									<td>{{ projectType.applicationFin | date:'dd/MM/yyyy' }}</td>
									<td>{{ projectType.coutJour }}</td>
									<td>
										<ng-container *ngIf="projectType.removable">
											<button 
												mat-icon-button 
												color="primary"
												(click)="editRow(projectType)">
										    <mat-icon matTooltip="Modifier cette ligne">edit</mat-icon>
										  </button>
											<button 
												mat-icon-button 
												color="warn"
												(click)="deleteRow(projectType)">
										    <mat-icon matTooltip="Supprimer cette ligne">clear</mat-icon>
										  </button>
										</ng-container>
									</td>
								</tr>
							</ng-container>
							<ng-template #noData>
								<tr><td colspan="4">Aucune donnée pour le moment</td></tr>
							</ng-template>
						</tbody>
					</table>
				</mat-step>

				<mat-step>
					<app-project-project-type-form (refreshRefProjectType)="refreshRefProjectType()"></app-project-project-type-form>
				</mat-step>
			</mat-horizontal-stepper>

		</mat-card-content>
	</ng-container>
	<ng-template #loadingTmp>
		<app-loader message="Récupération des informations "></app-loader>
	</ng-template>
</mat-card>